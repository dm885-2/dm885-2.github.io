(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{32:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(25),s=a.n(c),i=(a(32),a(10)),l=a(24),o=a(2),j=a(4),d=a(3),b=a.n(d),u=a(9),h=a(5),m=a(6),O=a(8),x=a(7),v=a(0);function p(e){return e.visible&&Object(v.jsx)("div",{className:"position-absolute vh-100 vw-100 d-flex justify-content-center align-items-center bg-secondary opacity-75",children:Object(v.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}var f,g,y=a(17),N=null!==(f=null===(g=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===g?void 0:g.apiURL)&&void 0!==f?f:"https://tigris.club/dm885api";function k(e){return Object(y.a)(e).reduce((function(e,t){return t.name&&(e[t.name]=t.value),e}),{})}var w=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"rawCall",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return fetch("".concat(N,"/").concat(a),{method:t,headers:Object(i.a)(Object(i.a)({"Content-Type":"application/json"},n),{},{Authorization:e.accessToken?"Bearer ".concat(e.accessToken):void 0}),body:r?JSON.stringify(r):void 0}).then((function(e){return 404===e.status?{error:!0}:e.json()})).catch((function(c){return console.error("".concat(N,"/").concat(a),{method:t,headers:Object(i.a)(Object(i.a)({"Content-Type":"application/json"},n),{},{Authorization:e.accessToken?"Bearer ".concat(e.accessToken):void 0}),body:r?JSON.stringify(r):void 0},c),!1}))}},{key:"call",value:function(){var t=Object(u.a)(b.a.mark((function t(){var a,n,r,c,s,l,o=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:"GET",r=o.length>1?o[1]:void 0,c=o.length>2?o[2]:void 0,s=o.length>3&&void 0!==o[3]?o[3]:{},t.next=6,e.rawCall(n,r,Object(i.a)({Authorization:null!==(a=e.authToken)&&void 0!==a?a:void 0},s),c);case 6:if((l=t.sent)||!e.refreshToken){t.next=15;break}return t.next=10,e.getAccessToken();case 10:return t.next=12,e.call(n,r,c,s);case 12:return t.abrupt("return",t.sent);case 15:return t.abrupt("return",l);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var t=Object(u.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rawCall("POST","auth/accessToken",{},{refreshToken:e.refreshToken});case 2:(a=t.sent)&&!a.error?e.accessToken=a.accessToken:e.refreshToken=!1;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}();w.authToken=!1,w.refreshToken=!1,w.accessToken=!1;var S=["Gecode","OR-tool"],T=["In queue","Computing","Completed"],D=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e}return Object(m.a)(a,[{key:"checkLogin",value:function(){var e=Object(u.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({loading:!0}),a=k(t.target.elements),e.next=5,w.call("POST","auth/login",a);case 5:(n=e.sent)&&!n.error?(this.props.history.push("/"),this.props.setRefreshToken(n.refreshToken,n.userRank)):(alert("Wrong username, or password."),this.setState({loading:!1}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:[Object(v.jsx)(p,{visible:this.state.loading}),Object(v.jsxs)("form",{onSubmit:function(t){return e.checkLogin(t)},className:"d-flex flex-column align-self-center w-25",children:[Object(v.jsx)("label",{children:"Username:"}),Object(v.jsx)("input",{name:"username",className:"form-control",type:"input"}),Object(v.jsx)("label",{children:"Password:"}),Object(v.jsx)("input",{name:"password",className:"form-control",type:"password"}),Object(v.jsx)("button",{className:"btn btn-primary mt-3",children:"Sign in"}),Object(v.jsx)("div",{className:"d-flex justify-content-center pt-2",children:Object(v.jsx)(j.b,{to:"/signup",children:"New user"})})]})]})}}]),a}(r.a.Component),C=Object(o.f)(D),L=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;w.call("get","users").then((function(t){t&&!t.error&&e.setState({user:t.data})}))}},{key:"isInt",value:function(e){return/^\+?(0|[1-9]\d*)$/.test(e)}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"container pt-4",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("h1",{children:"User List"}),Object(v.jsxs)("table",{className:"table table-striped",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"ID"}),Object(v.jsx)("th",{children:"Username"}),Object(v.jsx)("th",{children:"Rank"}),Object(v.jsx)("th",{}),Object(v.jsx)("th",{}),Object(v.jsx)("th",{children:"Resource limit [vCPUs]"})]})}),Object(v.jsx)("tbody",{children:this.state.user.map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.id}),Object(v.jsx)("td",{children:t.email}),Object(v.jsx)("td",{children:t.rank}),Object(v.jsx)("td",{children:Object(v.jsx)("button",{className:"btn btn-danger",onClick:function(){w.call("DELETE","users/".concat(t.id)).then((function(t){t&&!t.error&&e.getData()})),setTimeout((function(){return window.location.reload()}),2e3)},children:"Delete"})}),Object(v.jsx)("td",{children:Object(v.jsx)("button",{className:"btn btn-danger",onClick:function(){w.call("GET","users/".concat(t.id,"/clearQueue")).then((function(t){t&&!t.error&&(e.getData(),alert(t.message))}))},children:"Clear queue"})}),Object(v.jsx)("td",{children:Object(v.jsxs)("button",{className:"btn btn-secondary",onClick:function(){var a=prompt("Set recourse limit for user: "+t.email,t.solverLimit);!0===e.isInt(a)?w.call("PUT","users/".concat(t.id,"/resourceLimit/").concat(a)).then((function(n){e.getData(),n&&!n.error&&alert("The recourse limit for user ".concat(t.email," has been updated to ").concat(a,"."))})):alert("The recourse limit for user ".concat(t.email," has not been updated. Please enter a valid number."))},children:["Change (",t.solverLimit,")"]})})]},t.id)}))})]})]})})})}}]),a}(r.a.Component),M=Object(o.f)(L),I=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={solvers:[],editing:!1},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.call("GET","solvers");case 2:(t=e.sent)&&!t.error&&this.setState({solvers:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete it?")){e.next=6;break}return e.next=4,w.call("DELETE","solvers/"+t);case 4:return e.next=6,this.getData();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=k(t.target.elements),n="number"===typeof this.state.editing,e.next=5,n?w.call("PUT","solvers/"+this.state.editing,a):w.call("POST","solvers",a);case 5:(r=e.sent)&&!r.error?(this.setState({editing:!1}),this.getData()):alert("A unkown error happened, try again");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t="number"===typeof this.state.editing,a="new"===this.state.editing,n=t?this.state.solvers[this.state.editing]:{};return Object(v.jsxs)("div",{className:"container pt-4",children:[(t||a)&&Object(v.jsxs)("div",{className:"pb-2 mb-2 border-bottom",children:[Object(v.jsx)("h1",{children:t?"Editing solver":"New solver"}),Object(v.jsxs)("form",{onSubmit:function(t){return e.save(t)},children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-sm-2",children:Object(v.jsx)("label",{htmlFor:"name",children:"Solver name"})}),Object(v.jsx)("div",{className:"col-sm-10 pb-1",children:Object(v.jsx)("input",{className:"form-control",name:"name",required:!0,defaultValue:null===n||void 0===n?void 0:n.name})}),Object(v.jsx)("div",{className:"col-sm-2",children:Object(v.jsx)("label",{htmlFor:"name",children:"Image"})}),Object(v.jsx)("div",{className:"col-sm-10",children:Object(v.jsx)("input",{className:"form-control",name:"docker_image",required:!0,defaultValue:null===n||void 0===n?void 0:n.docker_image})})]}),Object(v.jsx)("button",{className:"btn btn-light",children:"Save"})]})]}),Object(v.jsx)("h1",{children:"Solvers"}),Object(v.jsx)("button",{onClick:function(){return e.setState({editing:"new"})},className:"btn btn-primary",children:"New solver"}),Object(v.jsxs)("table",{className:"table",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",children:"#"}),Object(v.jsx)("th",{scope:"col",children:"Name"}),Object(v.jsx)("th",{scope:"col",children:"Image"})]})}),Object(v.jsx)("tbody",{children:this.state.solvers.map((function(t,a){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"row",children:t.id}),Object(v.jsx)("td",{children:t.name}),Object(v.jsx)("td",{children:t.docker_image}),Object(v.jsxs)("td",{children:[Object(v.jsx)("button",{onClick:function(){return e.setState({editing:a})},className:"btn m-1 mt-0 mb-0 btn-secondary",children:"Edit"}),Object(v.jsx)("button",{onClick:function(){return e.delete(t.id)},className:"btn btn-danger",children:"Delete"})]})]},t.id)}))})]})]})}}]),a}(r.a.Component),E=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e}return Object(m.a)(a,[{key:"signUp",value:function(){var e=Object(u.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==(a=k(t.target.elements)).username.length){e.next=6;break}alert("A username is required"),e.next=20;break;case 6:if(0!==a.password.length){e.next=10;break}alert("A password is required"),e.next=20;break;case 10:if(a.password===a.passwordRepeat){e.next=14;break}alert("The two given password are not the same"),e.next=20;break;case 14:return this.setState({loading:!0}),e.next=17,w.call("POST","auth/register",a);case 17:n=e.sent,this.setState({loading:!1}),n&&!n.error?(alert("Your user has been created!"),this.props.history.push("/")):alert("A unkown error orcurred, try again");case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:[Object(v.jsx)(p,{visible:this.state.loading}),Object(v.jsxs)("form",{onSubmit:function(t){return e.signUp(t)},className:"d-flex flex-column align-self-center w-25",children:[Object(v.jsx)("label",{children:"Username:"}),Object(v.jsx)("input",{name:"username",required:!0,className:"form-control",type:"input"}),Object(v.jsx)("label",{children:"Password:"}),Object(v.jsx)("input",{name:"password",required:!0,className:"form-control",type:"password"}),Object(v.jsx)("label",{children:"Repeat password:"}),Object(v.jsx)("input",{name:"passwordRepeat",required:!0,className:"form-control",type:"password"}),Object(v.jsx)("button",{className:"btn btn-primary mt-3",children:"Create account"}),Object(v.jsx)("div",{className:"d-flex justify-content-center pt-2",children:Object(v.jsx)(j.b,{to:"/",children:"Go back"})})]})]})}}]),a}(r.a.Component),A=Object(o.f)(E),R=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).emptyState={outputs:{},history:[],models:[],data:[]},e.state=Object(i.a)({},e.emptyState),e.shouldGetData=!0,e}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.setState(Object(i.a)({},this.emptyState))}},{key:"componentDidMount",value:function(){var e=this;this.getData(),setTimeout((function(){return e.getInt()}),3e3)}},{key:"componentWillUnmount",value:function(){this.shouldGetData=!1}},{key:"getInt",value:function(){var e=this;this.shouldGetData&&this.getData(0).then((function(t){setTimeout((function(){return e.getInt()}),3e3)}))}},{key:"delete",value:function(){var e=Object(u.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete it?")){e.next=6;break}return e.next=4,w.call("DELETE","files/".concat(t));case 4:e.sent&&this.getData();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(u.a)(b.a.mark((function e(){var t,a,n=this,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,w.call("GET","jobs");case 3:(a=e.sent)&&!a.error&&this.setState({history:a.data.map((function(e){return e.timeRunning=0,1===e.status?e.timeRunning=Date.now()-Number(e.startTime):2===e.status&&(e.timeRunning=Number(e.endTime)-Number(e.startTime)),e}))}),1===t&&(w.call("GET","files/all/0").then((function(e){e&&!e.error&&n.setState({models:e.results})})),w.call("GET","files/all/1").then((function(e){e&&!e.error&&n.setState({data:e.results})})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOutput",value:function(){var e=Object(u.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.call("GET","jobs/"+t);case 2:(a=e.sent)&&!a.error&&((n=Object(i.a)({},this.state.outputs))[t]=JSON.parse(a.data.content),this.setState({outputs:n}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteJob",value:function(){var e=Object(u.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this job?")){e.next=6;break}return e.next=4,w.call("DELETE","jobs/"+t);case 4:return e.next=6,this.getData(0);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toMinutes",value:function(e){return Math.floor(e/864e5)+"d "+Math.floor(e%864e5/36e5)+"h "+Math.round(e%864e5%36e5/6e4)+"m "+Math.round(e%864e5%36e5%6e4/1e3)+"s"}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"container pt-4",children:[Object(v.jsx)("div",{className:"row align-items-start",children:Object(v.jsx)("div",{className:"col-md-12",children:Object(v.jsxs)("div",{className:"card card-body",children:[Object(v.jsx)("h3",{className:"text-center",children:"History"}),Object(v.jsxs)("table",{className:"table table-hover",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:"Running time"}),Object(v.jsx)("th",{children:"Status"}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{children:Object(v.jsx)("tr",{})})]}),Object(v.jsx)("div",{style:{maxHeight:"30vh",overflow:"auto"},children:Object(v.jsx)("table",{className:"table table-hover",children:Object(v.jsx)("tbody",{children:this.state.history.map((function(t){var a=e.state.outputs[t.id];return Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.id}),Object(v.jsx)("td",{children:0!==t.status&&e.toMinutes(t.timeRunning)}),Object(v.jsx)("td",{children:1===t.status?Object(v.jsx)("div",{className:"spinner-border text-primary",role:"status"}):T[t.status]}),Object(v.jsxs)("td",{children:[2===t.status&&Object(v.jsx)("button",{className:"btn btn-secondary",onClick:function(){return e.loadOutput(t.id)},children:"Output"}),t.status<=1&&Object(v.jsx)("button",{className:"btn btn-danger",onClick:function(){return e.deleteJob(t.id)},children:"Remove"})]})]}),a&&Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:"4",children:Object(v.jsxs)("table",{className:"table table-info table-striped",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",children:"Optimal?"}),Object(v.jsx)("th",{scope:"col"})]})}),Object(v.jsx)("tbody",{children:a.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.optimal&&Object(v.jsx)("b",{children:"Yes"})}),Object(v.jsx)("td",{children:e.result.join(", ")})]},e.id)}))})]})})})]},t.id)}))})})})]})})}),Object(v.jsx)("div",{className:"row pt-1",children:Object(v.jsx)(j.b,{to:"/newRun",className:"d-grid gap-2",children:Object(v.jsx)("button",{type:"button",className:"btn btn-primary",children:"Start new run!"})})}),Object(v.jsxs)("div",{className:"row pt-4",children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsxs)("div",{className:"card card-body",children:[Object(v.jsx)("h3",{className:"text-center",children:"Models"}),Object(v.jsxs)("table",{className:"table table-hover",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:"Name"})]})}),Object(v.jsx)("tbody",{children:this.state.models.map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.fileId}),Object(v.jsx)("td",{children:t.filename}),Object(v.jsx)("td",{children:Object(v.jsx)(j.b,{to:"/model/".concat(t.id),className:"text-dark",children:Object(v.jsx)("i",{className:"bi bi-pencil-square"})})}),Object(v.jsx)("td",{children:Object(v.jsx)("i",{onClick:function(){return e.delete(t.fileId)},role:"button",className:"bi bi-trash"})})]},t.id)}))})]})]}),Object(v.jsx)(j.b,{to:"/model/new",children:Object(v.jsx)("button",{type:"button",className:"btn btn-primary mt-1 w-100",children:"Create new model!"})})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsxs)("div",{className:"card card-body",children:[Object(v.jsx)("h3",{className:"text-center",children:"Data"}),Object(v.jsxs)("table",{className:"table table-hover",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:"Name"})]})}),Object(v.jsx)("tbody",{children:this.state.data.map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.fileId}),Object(v.jsx)("td",{children:t.filename}),Object(v.jsx)("td",{children:Object(v.jsx)(j.b,{to:"/data/".concat(t.fileId),className:"text-dark",children:Object(v.jsx)("i",{className:"bi bi-pencil-square"})})}),Object(v.jsx)("td",{children:Object(v.jsx)("i",{onClick:function(){return e.delete(t.fileId)},role:"button",className:"bi bi-trash"})})]},t.id)}))})]})]}),Object(v.jsx)(j.b,{to:"/data/new",children:Object(v.jsx)("button",{type:"button",className:"btn btn-primary mt-1 w-100",children:"Create new dataset!"})})]})]})]})}}]),a}(r.a.Component),F=a(15),G=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).newSolver={solver:S[0],flagA:!1,flagF:!1,cpuLimit:1,memoryLimit:0,timeLimit:0},e.state={models:[],data:[],currentModel:0,currentDataset:0,solverData:[],solvers:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;w.call("GET","files/all/0").then((function(t){t&&!t.error&&(console.log("Got resp",t),e.setState({models:t.results}))})),w.call("GET","files/all/1").then((function(t){t&&!t.error&&e.setState({data:t.results})})),w.call("GET","solvers").then((function(t){t&&!t.error&&e.setState({solverData:t.data})}))}},{key:"updateSolver",value:function(e,t,a){var n=Object(y.a)(this.state.solvers),r=Object(i.a)({},n[a]);r[e]=t,n[a]=r,this.setState({solvers:n})}},{key:"addSolver",value:function(){this.setState({solvers:[].concat(Object(y.a)(this.state.solvers),[Object(i.a)({},this.newSolver)])})}},{key:"save",value:function(){var e=Object(u.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={model:this.state.currentModel,dataset:this.state.currentDataset,solvers:Object(y.a)(this.state.solvers)},a=t.solvers.some((function(e){return!e.solverID||-1===e.solverID})),0!==t.model){e.next=6;break}alert("A valid model needs to be choosen"),e.next=18;break;case 6:if(0!==t.solvers.length){e.next=10;break}alert("You need atleast one solver"),e.next=18;break;case 10:if(!a){e.next=14;break}alert("A solver should be specified"),e.next=18;break;case 14:return e.next=16,w.call("POST","jobs",t);case 16:(n=e.sent)&&!n.error?(alert("Your run has been saved!"),this.props.history.push("/")):alert("Something went wrong, try again.");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"container pt-4",children:[Object(v.jsx)("h1",{children:"New run"}),Object(v.jsx)("label",{children:"Model:"}),Object(v.jsx)("div",{className:"dropdown",children:Object(v.jsxs)("select",{className:"form-select form-select-lg mb-2",onChange:function(t){return e.setState({currentModel:Number(t.target.value)})},defaultValue:this.state.currentModel,"aria-label":".form-select-lg",style:{width:"40%"},children:[Object(v.jsx)("option",{value:"0",children:"Choose a model"}),this.state.models.map((function(e){return Object(v.jsx)("option",{value:e.fileId,children:e.filename},e.fileId)}))]})}),Object(v.jsx)("label",{children:"Dataset:"}),Object(v.jsx)("div",{className:"dropdown",children:Object(v.jsxs)("select",{className:"form-select form-select-lg mb-2",onChange:function(t){return e.setState({currentDataset:Number(t.target.value)})},defaultValue:this.state.currentDataset,"aria-label":".form-select-lg",style:{width:"40%"},children:[Object(v.jsx)("option",{value:"0",children:"Choose a dataset"}),this.state.data.map((function(e){return Object(v.jsx)("option",{value:e.fileId,children:e.filename},e.fileId)}))]})}),this.state.solvers.map((function(t,a){var n;return Object(v.jsxs)("div",{className:"pt-4 pb-4 border-top",children:[Object(v.jsx)("label",{htmlFor:"solver",children:Object(v.jsxs)("h5",{children:["Solver #",a+1]})}),Object(v.jsxs)("select",{onChange:function(t){return e.updateSolver("solverID",Number(t.target.value),a)},className:"form-select form-select-lg mb-2","aria-label":".form-select-lg example",id:"solver",children:[Object(v.jsx)("option",{id:"-1",children:"Please select a solver"}),e.state.solverData.map((function(e,t){return Object(v.jsx)("option",{value:e.id,children:e.name},t)}))]}),Object(v.jsx)("h6",{children:"Flags"}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-sm-4",children:Object(v.jsx)("label",{htmlFor:"flagA",children:"All solutions?"})}),Object(v.jsx)("div",{className:"col-sm-8",children:Object(v.jsx)("input",{type:"checkbox",id:"flagA",onChange:function(t){return e.updateSolver("flagA",t.target.checked,a)},defaultChecked:t.flagA,name:"flagA"})}),Object(v.jsx)("div",{className:"col-sm-4",children:Object(v.jsx)("label",{htmlFor:"flagF",children:"Free search?"})}),Object(v.jsx)("div",{className:"col-sm-8",children:Object(v.jsx)("input",{type:"checkbox",onChange:function(t){return e.updateSolver("flagF",t.target.checked,a)},id:"flagF",defaultChecked:t.flagF,name:"flagF"})}),Object(v.jsx)("div",{className:"col-sm-4",children:Object(v.jsx)("label",{htmlFor:"cpuLimit",children:"vCPU's"})}),Object(v.jsx)("div",{className:"col-sm-8",children:Object(v.jsx)("input",(n={type:"number",min:"1",onChange:function(t){return e.updateSolver("cpuLimit",Number(t.target.value),a)}},Object(F.a)(n,"min","0"),Object(F.a)(n,"defaultValue",t.cpuLimit),Object(F.a)(n,"id","cpuLimit"),Object(F.a)(n,"name","cpuLimit"),n))}),Object(v.jsx)("div",{className:"col-sm-4",children:Object(v.jsx)("label",{htmlFor:"memoryLimit",children:"Memory [mb] (0 = not set)"})}),Object(v.jsx)("div",{className:"col-sm-8",children:Object(v.jsx)("input",{type:"number",onChange:function(t){return e.updateSolver("memoryLimit",Number(t.target.value),a)},min:"0",defaultValue:t.memoryLimit,id:"memoryLimit",name:"memoryLimit"})}),Object(v.jsx)("div",{className:"col-sm-4",children:Object(v.jsx)("label",{htmlFor:"timeLimit",children:"Time limit [ms] (0 = not set)"})}),Object(v.jsx)("div",{className:"col-sm-8",children:Object(v.jsx)("input",{type:"number",onChange:function(t){return e.updateSolver("timeLimit",Number(t.target.value),a)},min:"0",defaultValue:t.timeLimit,id:"timeLimit",name:"timeLimit"})})]})]},a)})),Object(v.jsxs)("div",{className:"btn-group mr-2",role:"group",children:[Object(v.jsx)("button",{onClick:function(){return e.save()},className:"btn btn-primary mt-2",children:"Save"}),Object(v.jsx)("button",{onClick:function(){return e.addSolver()},className:"btn btn-secondary mt-2",children:"New solver"})]})]})}}]),a}(r.a.Component),P=Object(o.f)(G),Q=[".mzn",".dzn"],q=["model","data"],U=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",content:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"===this.props.match.params.id){e.next=5;break}return e.next=3,w.call("GET","files/".concat(this.props.match.params.id));case 3:(t=e.sent)&&!t.error&&this.setState({name:t.filename,content:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(b.a.mark((function e(t){var a,n,r,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==(a=k(t.target.elements)).filename.length){e.next=6;break}alert("The name input is required for the "+q[this.props.type]),e.next=13;break;case 6:return n="new"!==this.props.match.params.id,r=n?"files/"+this.props.match.params.id:"files",c=n?"PUT":"POST",e.next=11,w.call(c,r,Object(i.a)(Object(i.a)({},a),{},{data:this.state.content,filetype:this.props.type}));case 11:(s=e.sent)&&!s.error?(alert("The "+q[this.props.type]+" has been saved!"),this.props.history.push("/")):alert("Something went wrong, try again");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseFile",value:function(e){var t=this,a=e.target.files[0],n=new FileReader;n.onload=function(e){t.setState({content:e.target.result})},n.readAsText(a)}},{key:"render",value:function(){var e=this,t=q[this.props.type],a="new"!==this.props.match.params.id;return Object(v.jsx)("div",{className:"container pt-4",children:Object(v.jsxs)("form",{onSubmit:function(t){return e.save(t)},children:[Object(v.jsx)("h1",{children:a?"Edit "+t:"New "+t}),Object(v.jsxs)("div",{className:"form-group pb-2",children:[Object(v.jsx)("label",{for:"nameInp",children:"Name"}),Object(v.jsx)("input",{type:"input",disabled:a,defaultValue:this.state.name,className:"form-control",id:"nameInp",name:"filename",placeholder:"".concat(t," name")})]}),Object(v.jsxs)("div",{className:"form-group pb-2",children:[Object(v.jsx)("label",{for:"contentInp",children:"Model"}),Object(v.jsx)("input",{id:"contentInp",type:"file",onChange:function(t){return e.parseFile(t)},accept:Q[this.props.type],className:"form-control"})]}),Object(v.jsx)("button",{className:"btn btn-primary mt-2",children:"Save"})]})})}}]),a}(r.a.Component),_=Object(o.f)(U),K=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={logs:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;w.call("GET","logs").then((function(t){t&&!t.error&&e.setState({logs:t.data})}))}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"container pt-8",children:Object(v.jsx)("div",{className:"row align-items-start",children:Object(v.jsx)("div",{className:"col-md-12",children:Object(v.jsxs)("div",{className:"card card-body mt-4",children:[Object(v.jsx)("h3",{className:"text-center",children:"Logs"}),Object(v.jsxs)("table",{className:"table table-hover mb-1",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:"id"}),Object(v.jsx)("th",{children:"Session"}),Object(v.jsx)("th",{children:"Request"}),Object(v.jsx)("th",{children:"Path"}),Object(v.jsx)("th",{children:"Timestamp"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsx)("tr",{})})]}),Object(v.jsx)("div",{style:{maxHeight:"70vh",overflow:"auto"},children:Object(v.jsx)("table",{className:"table table-hover",children:Object(v.jsx)("tbody",{children:this.state.logs.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.id}),Object(v.jsx)("td",{children:e.userId}),Object(v.jsx)("td",{children:e.sessionId}),Object(v.jsx)("td",{children:e.requestId}),Object(v.jsx)("td",{children:e.logPath}),Object(v.jsx)("td",{children:new Date(Number(e.timestamp)).toLocaleString()})]},e.id)}))})})})]})})})})}}]),a}(r.a.Component),V=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("br",{}),Object(v.jsxs)("ul",{className:"nav nav-tabs",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link active","aria-current":"page",to:"/grafana/RabbitMQ",children:"RabbitMQ"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/grafana/MySQL",children:"MySQL"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/grafana/Kubernetes",children:"Kubernetes"})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("a",{role:"button",target:"_blank",href:"https://grafana.smessie.com/d/Kn5xm-gZk/rabbitmq-overview?orgId=1&refresh=15s",className:"btn btn-primary",children:"Open RabbitMQ Grafana Dashboard"})]})})})}},{key:"componentDidMount",value:function(){}}]),a}(r.a.Component),J=Object(o.f)(V),H=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("br",{}),Object(v.jsxs)("ul",{className:"nav nav-tabs",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/grafana/RabbitMQ",children:"RabbitMQ"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link active","aria-current":"page",to:"/grafana/MySQL",children:"MySQL"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/grafana/Kubernetes",children:"Kubernetes"})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("a",{role:"button",target:"_blank",href:"https://grafana.smessie.com/d/549c2bf8936f7767ea6ac47c47b00f2a/mysql-exporter-quickstart-and-dashboard?orgId=1&refresh=10s",className:"btn btn-primary",children:"Open MySQL Grafana Dashboard"})]})})})}},{key:"componentDidMount",value:function(){}}]),a}(r.a.Component),W=Object(o.f)(H),z=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("br",{}),Object(v.jsxs)("ul",{className:"nav nav-tabs",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/grafana/RabbitMQ",children:"RabbitMQ"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/grafana/MySQL",children:"MySQL"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link active","aria-current":"page",to:"/grafana/Kubernetes",children:"Kubernetes"})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("a",{role:"button",target:"_blank",href:"https://grafana.smessie.com/d/6581e46e4e5c7ba40a07646395ef7b23/kubernetes-compute-resources-pod?orgId=1&refresh=10s",className:"btn btn-primary",children:"Open Kubernetes Grafana Dashboard"})]})})})}},{key:"componentDidMount",value:function(){}}]),a}(r.a.Component),B=Object(o.f)(z);function Y(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),s=Object(l.a)(c,2),d=s[0],b=s[1],u=function(e){w.refreshToken=e,r(e)};Object(n.useEffect)((function(){var e=localStorage.getItem("token"+N),t=localStorage.getItem("rank"+N);e&&t&&(b(t),u(e))}),[]);var h=function(e){return d>0&&Object(v.jsx)(o.a,Object(i.a)(Object(i.a)({},e),{},{children:e.children}))};return Object(v.jsx)(j.a,{children:a?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("nav",{className:"container-fluid navbar navbar-expand-lg navbar-light bg-light",children:[Object(v.jsx)(j.b,{className:"navbar-brand",to:"/",children:"MiniZinc"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(v.jsxs)("ul",{className:"navbar-nav",children:[Object(v.jsx)("li",{className:"nav-item active",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/",children:"Jobs"})}),d>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/users",children:"Users"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/solvers",children:"Solvers"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/log",children:"Logs"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/grafana/RabbitMQ",children:"Grafana"})})]}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(j.b,{className:"nav-link",to:"/",onClick:function(){localStorage.removeItem("token"+N),b(1),u(!1)},children:"Sign out"})})]})})]}),Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/",exact:!0,children:Object(v.jsx)(R,{})}),Object(v.jsx)(o.a,{exact:!0,path:"/newRun",children:Object(v.jsx)(P,{})}),Object(v.jsx)(h,{exact:!0,path:"/users",children:Object(v.jsx)(M,{})}),Object(v.jsx)(h,{exact:!0,path:"/solvers",children:Object(v.jsx)(I,{})}),Object(v.jsx)(h,{exact:!0,path:"/log",children:Object(v.jsx)(K,{})}),Object(v.jsx)(h,{exact:!0,path:"/grafana/RabbitMQ",children:Object(v.jsx)(J,{})}),Object(v.jsx)(h,{exact:!0,path:"/grafana/MySQL",children:Object(v.jsx)(W,{})}),Object(v.jsx)(h,{exact:!0,path:"/grafana/Kubernetes",children:Object(v.jsx)(B,{})}),Object(v.jsx)(o.a,{exact:!0,path:"/model/:id",children:Object(v.jsx)(_,{type:0})}),Object(v.jsx)(o.a,{exact:!0,path:"/data/:id",children:Object(v.jsx)(_,{type:1})}),Object(v.jsx)(o.a,{path:"*",children:Object(v.jsx)(R,{})})]})]}):Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/signup",children:Object(v.jsx)(A,{})}),Object(v.jsx)(o.a,{path:"*",children:Object(v.jsx)(C,{setRefreshToken:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b(t),u(e),localStorage.setItem("token"+N,e),localStorage.setItem("rank"+N,t)}})})]})})}var Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[43,1,2]]]);
//# sourceMappingURL=main.e2b5a182.chunk.js.map